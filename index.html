<html>
  <title>SuperFlix - Tela Inicial</title>
  <link rel="stylesheet" href="styles.css">
  <body>
    <div class="top-bar">
      <img class="logo" src="logo.png" width="50">
      <button id="home" class="Home">Home</button>
      <button id="new" class="New">New</button>
      <input style="margin-left: 15%; display: inline-block; width: 200px; height: 32px;"
             type="text" placeholder="pesquisar" id="pesquisar">
      <select id="modo" style="margin-left: 50px;">
        <option value="modo escuro">Modo Escuro</option>
        <option value="modo claro">Modo Claro</option>
        <option value="amoled">Amoled</option>
      </select>
    </div>

    <div class="menu">
      <div class="scroll" id="scroll"></div>
    </div>

    <!-- Template escondido -->
    <a id="template" class="card" href="#" style="display:none; text-decoration:none;">
      <div class="filme">
        <img class="ep-image" src="logo.png" height="125" width="280"
             style="margin-left:10px; margin-right:10px; border-radius:10px;">
        <h2 class="text" style="color:white; margin-left:5px;">Base</h2>
        <p class="descricao" style="color:white; margin-left:5px;">
          Descrição base
        </p>
      </div>
    </a>

    <!-- Sua lista -->
    <script src="https://cdn.jsdelivr.net/gh/SupremeAlienCode/SuperFlix/listaMenu.js"></script>

    <!-- Script principal -->
    <script>
      // Elementos
      const campo = document.getElementById('pesquisar');
      const botaoNew = document.getElementById('new');
      const botaoHome = document.getElementById('home');
      const select = document.getElementById('modo');
      const categoria = document.getElementById('scroll');
      const template = document.getElementById('template');

      // Renderiza cards a partir da lista
      function renderLista() {
        categoria.innerHTML = ''; // limpa antes de renderizar
        Object.keys(lista).forEach((id) => {
          const item = lista[id];
          const clone = template.cloneNode(true);
          clone.style.display = 'block';
          clone.href = item.url;

          clone.querySelector('.ep-image').src = item.img;
          clone.querySelector('.text').textContent = item.title;
          clone.querySelector('.descricao').textContent = item.descri;

          categoria.appendChild(clone);
        });
      }

      // Filtro de pesquisa
      function atualizarFilmes(termo) {
        const cards = categoria.querySelectorAll('.card');
        const t = (termo || '').toLowerCase();
        cards.forEach((card) => {
          const titulo = card.querySelector('.text')?.textContent.toLowerCase() || '';
          const descricao = card.querySelector('.descricao')?.textContent.toLowerCase() || '';
          card.style.display = (titulo.includes(t) || descricao.includes(t)) ? 'block' : 'none';
        });
      }

      // Modo visual
      function atualizarModo(modo) {
        const textos = document.getElementsByClassName('text');
        const filmes = document.getElementsByClassName('filme');

        if (modo === 'modo escuro') {
          document.body.style.backgroundColor = '#210202';
          categoria.style.backgroundColor = 'black';
          for (let el of textos) el.style.color = 'white';
          for (let el of filmes) el.style.backgroundColor = '#210202';
        } else if (modo === 'modo claro') {
          document.body.style.backgroundColor = '#ffc2c2';
          categoria.style.backgroundColor = 'white';
          for (let el of textos) el.style.color = 'black';
          for (let el of filmes) el.style.backgroundColor = '#ffc2c2';
        } else if (modo === 'amoled') {
          document.body.style.backgroundColor = 'black';
          categoria.style.backgroundColor = '#383838';
          for (let el of textos) el.style.color = 'white';
          for (let el of filmes) el.style.backgroundColor = 'black';
        }
      }

      // Eventos
      campo.addEventListener('input', (e) => atualizarFilmes(e.target.value));
      botaoNew.addEventListener('click', () => atualizarFilmes('¿¿')); // marca "novos" por ¿¿
      botaoHome.addEventListener('click', () => atualizarFilmes(''));
      select.addEventListener('change', () => atualizarModo(select.value));

      // Inicialização
      renderLista();
      atualizarFilmes('');
      atualizarModo(select.value);
    </script>
  </body>
</html>
